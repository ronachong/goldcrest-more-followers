<!-- html file for back office -->

<!-- FOR JAVASCRIPT -->
<!-- going to get json for email, name, uid, keyword, and is_active from api -->
    <!-- use javascript library variable for request to access -->

<!-- create put request to update relevant data (keyword for 'update', is_active for 'activate/deactivate' switch) -->
    <!-- create json using javascript and element id's to return to api as body of put request -->

<script>
    responseJSON = json.parse(xhttp.responseText); // not sure if this is the proper way to get the response data
    var id_token = responseJSON["id_token"]
    var user_id = responseJSON["user_id"];
    var email = responseJSON["email"];
    var name = responseJSON["name"];
    var keyword = responseJSON["keyword"];
    var is_active = responseJSON["is_active"];
    
    var returnJSON = NULL;
    var authorization = "Bearer" + 
    
    var submitButton = getElementByID("submit");
    var activateButton = getElementByID("activate");
    
    // handler for clicking update button
    submitButton.onclick = updateKeyword;
    
    function updateKeyword() {
        keyword = document.getElementById("keyword").value  // update keyword value
        
        returnJSON = {
            "keyword" : keyword
        };
        
        sendPUTrequest(returnJSON);
    }
    
    // handler for clicking deactivate/activate button
    activateButton.onclick = updateStatus;
    
    function updateStatus() {
        is_active = is_active ? False : True; // switch value of is_active
        
        returnJSON = {
            "is_active" : is_active,
            "user_id" : user_id
        }
        
        sendPUTrequest(returnJSON);
    }
    
    function sendPUTrequest(returnJSON) {
        var xhttp = new XMLHttpRequest();
        xhttp.open('POST', returnJSON, true);
        xhttp.setRequestHeader('Content-Type', 'application/json');
        xhttp.setRequestHeader('authorization', id_token);
        
        // do I need xhttp.onload here?? what does that do? see http://blog.garstasio.com/you-dont-need-jquery/ajax/ under Web API
    }
        
        xhttp.send(JSON.stringify(returnJSON)); // not sure if I need to put send data inside () or can use just empty (); see http://blog.garstasio.com/you-dont-need-jquery/ajax/ under Web API
    }
        
    
</script>
